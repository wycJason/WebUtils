<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>H5</title>
</head>
<body>
<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
<script>
//https://blog.csdn.net/feb_kylin/article/details/79109321
/**
 * 网络图像文件转Base64
 */
function getBase64Image(img) {
    var canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;
    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, img.width, img.height);
    var ext = img.src.substring(img.src.lastIndexOf(".") + 1).toLowerCase();
    var dataURL = canvas.toDataURL("image/" + ext);
    return dataURL;
}


/**
 *Base64字符串转二进制
 */
function dataURLtoBlob(dataurl) {
    var arr = dataurl.split(','),
            mime = arr[0].match(/:(.*?);/)[1],
            bstr = atob(arr[1]),
            n = bstr.length,
            u8arr = new Uint8Array(n);
    while (n--) {
        u8arr[n] = bstr.charCodeAt(n);
    }
    return new Blob([u8arr], {
        type: mime
    });
}


var image = new Image();
//image.src = "Images/girls.jpg";
image.src = "http://171.221.219.30:36002/DocManage/downloadfile/90b77f24dd944f46a906b0f6c078c6c4_2021_3_15_48873f68eca8417594b50bf272557cb1.jpg";
image.crossOrigin = '*' // 支持跨域图片
image.onload = function() {
    //这样就获取到了文件的Base64字符串
    var base64 = getBase64Image(image);
    console.log(base64);

    //Base64字符串转二进制
    var file = dataURLtoBlob(base64);
    console.log(file);


    var imgInstance = new Image();
    imgInstance.src=base64;
    imgInstance.width=88;
    imgInstance.height=75;
    $('body').html(imgInstance)
}
</script>
</body>
</html>
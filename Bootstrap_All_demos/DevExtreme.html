<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- DevExtreme themes -->
    <link rel="stylesheet" href="https://cdn3.devexpress.com/jslib/19.1.7/css/dx.common.css">
    <link rel="stylesheet" href="https://cdn3.devexpress.com/jslib/19.1.7/css/dx.light.css">
    <title>DevExtreme</title>
</head>
<body>
<div id="buttonContainer"></div>
<h2>下拉树</h2>
<div id="treeBox"></div>
<h2>下拉网格</h2>
<div id="gridBox"></div>
<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
<!-- DevExtreme library -->
<script src="https://cdn3.devexpress.com/jslib/19.1.7/js/dx.all.js"></script>
<script>
    const products = [{
        id: '1',
        text: 'Stores',
        expanded: true,
        items: [{
            id: '1_1',
            text: 'Super Mart of the West',
            expanded: true,
            items: [{
                id: '1_1_1',
                text: 'Video Players',
                items: [{
                    id: '1_1_1_1',
                    text: 'HD Video Player',
                    price: 220,
                    image: 'images/products/1.png'
                }, {
                    id: '1_1_1_2',
                    text: 'SuperHD Video Player',
                    image: 'images/products/2.png',
                    price: 270
                }]
            }, {
                id: '1_1_2',
                text: 'Televisions',
                expanded: true,
                items: [{
                    id: '1_1_2_1',
                    text: 'SuperLCD 42',
                    image: 'images/products/7.png',
                    price: 1200
                }, {
                    id: '1_1_2_2',
                    text: 'SuperLED 42',
                    image: 'images/products/5.png',
                    price: 1450
                }, {
                    id: '1_1_2_3',
                    text: 'SuperLED 50',
                    image: 'images/products/4.png',
                    price: 1600
                }, {
                    id: '1_1_2_4',
                    text: 'SuperLCD 55',
                    image: 'images/products/6.png',
                    price: 1350
                }, {
                    id: '1_1_2_5',
                    text: 'SuperLCD 70',
                    image: 'images/products/9.png',
                    price: 4000
                }]
            }, {
                id: '1_1_3',
                text: 'Monitors',
                expanded: true,
                items: [{
                    id: '1_1_3_1',
                    text: '19"',
                    expanded: true,
                    items: [{
                        id: '1_1_3_1_1',
                        text: 'DesktopLCD 19',
                        image: 'images/products/10.png',
                        price: 160
                    }]
                }, {
                    id: '1_1_3_2',
                    text: '21"',
                    items: [{
                        id: '1_1_3_2_1',
                        text: 'DesktopLCD 21',
                        image: 'images/products/12.png',
                        price: 170
                    }, {
                        id: '1_1_3_2_2',
                        text: 'DesktopLED 21',
                        image: 'images/products/13.png',
                        price: 175
                    }]
                }]
            }, {
                id: '1_1_4',
                text: 'Projectors',
                items: [{
                    id: '1_1_4_1',
                    text: 'Projector Plus',
                    image: 'images/products/14.png',
                    price: 550
                }, {
                    id: '1_1_4_2',
                    text: 'Projector PlusHD',
                    image: 'images/products/15.png',
                    price: 750
                }]
            }]

        }, {
            id: '1_2',
            text: 'Braeburn',
            items: [{
                id: '1_2_1',
                text: 'Video Players',
                items: [{
                    id: '1_2_1_1',
                    text: 'HD Video Player',
                    image: 'images/products/1.png',
                    price: 240
                }, {
                    id: '1_2_1_2',
                    text: 'SuperHD Video Player',
                    image: 'images/products/2.png',
                    price: 300
                }]
            }, {
                id: '1_2_2',
                text: 'Televisions',
                items: [{
                    id: '1_2_2_1',
                    text: 'SuperPlasma 50',
                    image: 'images/products/3.png',
                    price: 1800
                }, {
                    id: '1_2_2_2',
                    text: 'SuperPlasma 65',
                    image: 'images/products/8.png',
                    price: 3500
                }]
            }, {
                id: '1_2_3',
                text: 'Monitors',
                items: [{
                    id: '1_2_3_1',
                    text: '19"',
                    items: [{
                        id: '1_2_3_1_1',
                        text: 'DesktopLCD 19',
                        image: 'images/products/10.png',
                        price: 170
                    }]
                }, {
                    id: '1_2_3_2',
                    text: '21"',
                    items: [{
                        id: '1_2_3_2_1',
                        text: 'DesktopLCD 21',
                        image: 'images/products/12.png',
                        price: 180
                    }, {
                        id: '1_2_3_2_2',
                        text: 'DesktopLED 21',
                        image: 'images/products/13.png',
                        price: 190
                    }]
                }]
            }]

        }, {
            id: '1_3',
            text: 'E-Mart',
            items: [{
                id: '1_3_1',
                text: 'Video Players',
                items: [{
                    id: '1_3_1_1',
                    text: 'HD Video Player',
                    image: 'images/products/1.png',
                    price: 220
                }, {
                    id: '1_3_1_2',
                    text: 'SuperHD Video Player',
                    image: 'images/products/2.png',
                    price: 275
                }]
            }, {
                id: '1_3_3',
                text: 'Monitors',
                items: [{
                    id: '1_3_3_1',
                    text: '19"',
                    items: [{
                        id: '1_3_3_1_1',
                        text: 'DesktopLCD 19',
                        image: 'images/products/10.png',
                        price: 165
                    }]
                }, {
                    id: '1_3_3_2',
                    text: '21"',
                    items: [{
                        id: '1_3_3_2_1',
                        text: 'DesktopLCD 21',
                        image: 'images/products/12.png',
                        price: 175
                    }]
                }]
            }]
        }, {
            id: '1_4',
            text: 'Walters',
            items: [{
                id: '1_4_1',
                text: 'Video Players',
                items: [{
                    id: '1_4_1_1',
                    text: 'HD Video Player',
                    image: 'images/products/1.png',
                    price: 210
                }, {
                    id: '1_4_1_2',
                    text: 'SuperHD Video Player',
                    image: 'images/products/2.png',
                    price: 250
                }]
            }, {
                id: '1_4_2',
                text: 'Televisions',
                items: [{
                    id: '1_4_2_1',
                    text: 'SuperLCD 42',
                    image: 'images/products/7.png',
                    price: 1100
                }, {
                    id: '1_4_2_2',
                    text: 'SuperLED 42',
                    image: 'images/products/5.png',
                    price: 1400
                }, {
                    id: '1_4_2_3',
                    text: 'SuperLED 50',
                    image: 'images/products/4.png',
                    price: 1500
                }, {
                    id: '1_4_2_4',
                    text: 'SuperLCD 55',
                    image: 'images/products/6.png',
                    price: 1300
                }, {
                    id: '1_4_2_5',
                    text: 'SuperLCD 70',
                    image: 'images/products/9.png',
                    price: 4000
                }, {
                    id: '1_4_2_6',
                    text: 'SuperPlasma 50',
                    image: 'images/products/3.png',
                    price: 1700
                }]
            }, {
                id: '1_4_3',
                text: 'Monitors',
                items: [{
                    id: '1_4_3_1',
                    text: '19"',
                    items: [{
                        id: '1_4_3_1_1',
                        text: 'DesktopLCD 19',
                        image: 'images/products/10.png',
                        price: 160
                    }]
                }, {
                    id: '1_4_3_2',
                    text: '21"',
                    items: [{
                        id: '1_4_3_2_1',
                        text: 'DesktopLCD 21',
                        image: 'images/products/12.png',
                        price: 170
                    }, {
                        id: '1_4_3_2_2',
                        text: 'DesktopLED 21',
                        image: 'images/products/13.png',
                        price: 180
                    }]
                }]
            }, {
                id: '1_4_4',
                text: 'Projectors',
                items: [{
                    id: '1_4_4_1',
                    text: 'Projector Plus',
                    image: 'images/products/14.png',
                    price: 550
                }, {
                    id: '1_4_4_2',
                    text: 'Projector PlusHD',
                    image: 'images/products/15.png',
                    price: 750
                }]
            }]

        }]
    }];

    const customers = [{
        'ID': 1,
        'CompanyName': 'Super Mart of the West',
        'Address': '702 SW 8th Street',
        'City': 'Bentonville',
        'State': 'Arkansas',
        'Zipcode': 72716,
        'Phone': '(800) 555-2797',
        'Fax': '(800) 555-2171',
        'Website': 'http://www.nowebsitesupermart.com'
    }, {
        'ID': 2,
        'CompanyName': 'Electronics Depot',
        'Address': '2455 Paces Ferry Road NW',
        'City': 'Atlanta',
        'State': 'Georgia',
        'Zipcode': 30339,
        'Phone': '(800) 595-3232',
        'Fax': '(800) 595-3231',
        'Website': 'http://www.nowebsitedepot.com'
    }, {
        'ID': 3,
        'CompanyName': 'K&S Music',
        'Address': '1000 Nicllet Mall',
        'City': 'Minneapolis',
        'State': 'Minnesota',
        'Zipcode': 55403,
        'Phone': '(612) 304-6073',
        'Fax': '(612) 304-6074',
        'Website': 'http://www.nowebsitemusic.com'
    }, {
        'ID': 4,
        'CompanyName': "Tom's Club",
        'Address': '999 Lake Drive',
        'City': 'Issaquah',
        'State': 'Washington',
        'Zipcode': 98027,
        'Phone': '(800) 955-2292',
        'Fax': '(800) 955-2293',
        'Website': 'http://www.nowebsitetomsclub.com'
    }, {
        'ID': 5,
        'CompanyName': 'E-Mart',
        'Address': '3333 Beverly Rd',
        'City': 'Hoffman Estates',
        'State': 'Illinois',
        'Zipcode': 60179,
        'Phone': '(847) 286-2500',
        'Fax': '(847) 286-2501',
        'Website': 'http://www.nowebsiteemart.com'
    }, {
        'ID': 6,
        'CompanyName': 'Walters',
        'Address': '200 Wilmot Rd',
        'City': 'Deerfield',
        'State': 'Illinois',
        'Zipcode': 60015,
        'Phone': '(847) 940-2500',
        'Fax': '(847) 940-2501',
        'Website': 'http://www.nowebsitewalters.com'
    }, {
        'ID': 7,
        'CompanyName': 'StereoShack',
        'Address': '400 Commerce S',
        'City': 'Fort Worth',
        'State': 'Texas',
        'Zipcode': 76102,
        'Phone': '(817) 820-0741',
        'Fax': '(817) 820-0742',
        'Website': 'http://www.nowebsiteshack.com'
    }, {
        'ID': 8,
        'CompanyName': 'Circuit Town',
        'Address': '2200 Kensington Court',
        'City': 'Oak Brook',
        'State': 'Illinois',
        'Zipcode': 60523,
        'Phone': '(800) 955-2929',
        'Fax': '(800) 955-9392',
        'Website': 'http://www.nowebsitecircuittown.com'
    }, {
        'ID': 9,
        'CompanyName': 'Premier Buy',
        'Address': '7601 Penn Avenue South',
        'City': 'Richfield',
        'State': 'Minnesota',
        'Zipcode': 55423,
        'Phone': '(612) 291-1000',
        'Fax': '(612) 291-2001',
        'Website': 'http://www.nowebsitepremierbuy.com'
    }, {
        'ID': 10,
        'CompanyName': 'ElectrixMax',
        'Address': '263 Shuman Blvd',
        'City': 'Naperville',
        'State': 'Illinois',
        'Zipcode': 60563,
        'Phone': '(630) 438-7800',
        'Fax': '(630) 438-7801',
        'Website': 'http://www.nowebsiteelectrixmax.com'
    }, {
        'ID': 11,
        'CompanyName': 'Video Emporium',
        'Address': '1201 Elm Street',
        'City': 'Dallas',
        'State': 'Texas',
        'Zipcode': 75270,
        'Phone': '(214) 854-3000',
        'Fax': '(214) 854-3001',
        'Website': 'http://www.nowebsitevideoemporium.com'
    }, {
        'ID': 12,
        'CompanyName': 'Screen Shop',
        'Address': '1000 Lowes Blvd',
        'City': 'Mooresville',
        'State': 'North Carolina',
        'Zipcode': 28117,
        'Phone': '(800) 445-6937',
        'Fax': '(800) 445-6938',
        'Website': 'http://www.nowebsitescreenshop.com'
    }];

    $(function () {
        $("#buttonContainer").dxButton({
            text: "Click me!",
            onClick: function () {
                alert("Hello world!");
            }
        });
    });

    $(function(){
        var treeView, dataGrid;

        var syncTreeViewSelection = function(treeView, value){
            if (!value) {
                treeView.unselectAll();
            } else {
                treeView.selectItem(value);
            }
        };

        var makeAsyncDataSource = function(jsonFile){
            return new DevExpress.data.CustomStore({
                loadMode: "raw",
                key: "ID",
                load: function() {
                    return $.getJSON("data/" + jsonFile);
                }
            });
        };

        var getSelectedItemsKeys = function(items) {
            var result = [];
            items.forEach(function(item) {
                if(item.selected) {
                    result.push(item.key);
                }
                if(item.items.length) {
                    result = result.concat(getSelectedItemsKeys(item.items));
                }
            });
            return result;
        };

        $("#treeBox").dxDropDownBox({
            value: "1_1",
            valueExpr: "id",
            displayExpr: "text",
            placeholder: "Select a value...",
            showClearButton: true,
            dataSource: products,
            contentTemplate: function(e){
                var value = e.component.option("value"),
                        $treeView = $("<div>").dxTreeView({
                            dataSource: e.component.option("dataSource"),
                            //dataStructure: "plain",
                            //parentIdExpr: "categoryId",
                            keyExpr: "id",
                            displayExpr: "text",
                            selectionMode: "single",
                            selectByClick: true,
                            onContentReady: function(args){
                                syncTreeViewSelection(args.component, value);
                            },
                            selectNodesRecursive: false,
                            onItemSelectionChanged: function(args){
                                var nodes = args.component.getNodes(),
                                        value = getSelectedItemsKeys(nodes);

                                e.component.option("value", value);
                            }
                        });

                treeView = $treeView.dxTreeView("instance");

                e.component.on("valueChanged", function(args){
                    syncTreeViewSelection(treeView, args.value);
                });

                return $treeView;
            }
        });

        $("#gridBox").dxDropDownBox({
            value: 3,
            valueExpr: "ID",
            deferRendering: false,
            placeholder: "Select a value...",
            displayExpr: function(item){
                return item && item.CompanyName + " <" + item.Phone + ">";
            },
            showClearButton: true,
            dataSource: customers,
            contentTemplate: function(e){
                var value = e.component.option("value"),
                        $dataGrid = $("<div>").dxDataGrid({
                            dataSource: e.component.option("dataSource"),
                            columns: ["CompanyName", "City", "Phone"],
                            hoverStateEnabled: true,
                            paging: { enabled: true, pageSize: 10 },
                            filterRow: { visible: true },
                            scrolling: { mode: "infinite" },
                            selection: { mode: "single" },
                            selectedRowKeys: [value],
                            height: "100%",
                            onSelectionChanged: function(selectedItems){
                                var keys = selectedItems.selectedRowKeys,hasSelection = keys.length;

                                e.component.option("value", hasSelection ? keys[0].ID : null);
                            }
                        });

                dataGrid = $dataGrid.dxDataGrid("instance");

                e.component.on("valueChanged", function(args){
                    dataGrid.selectRows(args.value.ID, false);
                });

                return $dataGrid;
            }
        });
    });

</script>
</body>
</html>